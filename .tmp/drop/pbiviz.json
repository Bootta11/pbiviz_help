{"visual":{"name":"testopet","displayName":"testopet","guid":"PBI_CV_724FCDDA_CF7B_4C78_B73A_24704A8598F3_DEBUG","visualClassName":"Visual","version":"1.0.0","description":"","supportUrl":"","gitHubUrl":""},"apiVersion":"1.1.0","author":{"name":"","email":""},"assets":{"icon":"assets/icon.png"},"externalJS":[],"style":"style/visual.less","capabilities":{"dataRoles":[{"displayName":"Time","name":"time","kind":0}],"dataViewMappings":[{"conditions":[{"time":{"max":1}}],"table":{"rows":{"select":[{"for":{"in":"time"}}]}}}],"objects":{"customObjectTest":{"displayName":"Custom object test","properties":{"prop11":{"displayName":"Prop11test","type":{"bool":true}}}}}},"content":{"js":"var powerbi;\r\n(function (powerbi) {\r\n    var extensibility;\r\n    (function (extensibility) {\r\n        var visual;\r\n        (function (visual) {\r\n            var PBI_CV_724FCDDA_CF7B_4C78_B73A_24704A8598F3;\r\n            (function (PBI_CV_724FCDDA_CF7B_4C78_B73A_24704A8598F3) {\r\n                var Visual = (function () {\r\n                    //private static vis: Visual;\r\n                    function Visual(options) {\r\n                        console.log('Visual constructor', options);\r\n                        Visual.host = options.host;\r\n                        this.selectionIdBuilder = options.host.createSelectionIdBuilder();\r\n                        this.target = options.element;\r\n                        this.selectionManager = options.host.createSelectionManager();\r\n                        //Visual.vis = this;\r\n                    }\r\n                    Visual.converter = function (dataView) {\r\n                        var _a = dataView.table, columns = _a.columns, rows = _a.rows;\r\n                        console.log(\"cp before datas\", dataView);\r\n                        var datas = rows.map(function (row, idx) {\r\n                            var data = row.reduce(function (d, v, i) {\r\n                                d[columns[i].displayName] = v;\r\n                                return d;\r\n                            }, {});\r\n                            console.log(\"cp after data: \", data);\r\n                            console.log(\"cp rows\", dataView.table.rows);\r\n                            var sb2 = data.identity.createSelectionIdBuilder();\r\n                            data.identity = sb2\r\n                                .withSeries(dataView.table.rows, this.rows[idx])\r\n                                .createSelectionId();\r\n                            console.log(\"Data conv: \" + data);\r\n                            return data;\r\n                        });\r\n                        return datas;\r\n                    };\r\n                    Visual.prototype.update = function (options) {\r\n                        var dataViews = options.dataViews; //options: VisualUpdateOptions\r\n                        var table = dataViews[0].table;\r\n                        var dataValues = table.rows;\r\n                        if (!options.dataViews && !options.dataViews[0]) {\r\n                            return;\r\n                        }\r\n                        this.dataView = options.dataViews[0];\r\n                        console.log(\"cp update 1\");\r\n                        var data = Visual.converter(this.dataView); //if we comment this line code after will execute\r\n                        console.log(\"cp update 2\", data);\r\n                        var htmlSelect = \"\";\r\n                        htmlSelect += \"<select id='dateSelector'>\";\r\n                        htmlSelect += \"<option value='#'>-- select --</option>\";\r\n                        for (var i = 0; i < dataViews[0].table.rows.length; i++) {\r\n                            htmlSelect += \"<option value=\\\"\" + dataViews[0].table.rows[i].toString() + \"\\\">\" + dataViews[0].table.rows[i].toString() + \"</option>\";\r\n                        }\r\n                        htmlSelect += \"</select>\";\r\n                        this.target.innerHTML = htmlSelect;\r\n                    };\r\n                    Visual.prototype.destroy = function () {\r\n                        console.log('destroy called');\r\n                    };\r\n                    return Visual;\r\n                }());\r\n                PBI_CV_724FCDDA_CF7B_4C78_B73A_24704A8598F3.Visual = Visual;\r\n            })(PBI_CV_724FCDDA_CF7B_4C78_B73A_24704A8598F3 = visual.PBI_CV_724FCDDA_CF7B_4C78_B73A_24704A8598F3 || (visual.PBI_CV_724FCDDA_CF7B_4C78_B73A_24704A8598F3 = {}));\r\n        })(visual = extensibility.visual || (extensibility.visual = {}));\r\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\r\n})(powerbi || (powerbi = {}));\r\nvar powerbi;\r\n(function (powerbi) {\r\n    var visuals;\r\n    (function (visuals) {\r\n        var plugins;\r\n        (function (plugins) {\r\n            plugins.PBI_CV_724FCDDA_CF7B_4C78_B73A_24704A8598F3_DEBUG = {\r\n                name: 'PBI_CV_724FCDDA_CF7B_4C78_B73A_24704A8598F3_DEBUG',\r\n                displayName: 'testopet',\r\n                class: 'Visual',\r\n                version: '1.0.0',\r\n                apiVersion: '1.1.0',\r\n                create: function (options) { return new powerbi.extensibility.visual.PBI_CV_724FCDDA_CF7B_4C78_B73A_24704A8598F3.Visual(options); },\r\n                custom: true\r\n            };\r\n        })(plugins = visuals.plugins || (visuals.plugins = {}));\r\n    })(visuals = powerbi.visuals || (powerbi.visuals = {}));\r\n})(powerbi || (powerbi = {}));\r\n//# sourceMappingURL=visual.js.map","css":".visual-PBI_CV_724FCDDA_CF7B_4C78_B73A_24704A8598F3_DEBUG p {\n  font-size: 20px;\n  font-weight: bold;\n}\n.visual-PBI_CV_724FCDDA_CF7B_4C78_B73A_24704A8598F3_DEBUG p em {\n  background: yellow;\n  padding: 5px;\n}\n","iconBase64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpBOEJGMzkxN0NBRDNFMDExQTcxQ0JFODI3ODBCQUE5RSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3NEY1QjA1NUQ0OTAxMUUwQTgxREI2NjMxMkNEMUNEMyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3NEY1QjA1NEQ0OTAxMUUwQTgxREI2NjMxMkNEMUNEMyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5Mjk5RDU1ODBGRDRFMDExQTcxQ0JFODI3ODBCQUE5RSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBOEJGMzkxN0NBRDNFMDExQTcxQ0JFODI3ODBCQUE5RSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpDoNX0AAAI3SURBVHjarJRLSFVRFIY9t7SiRDGLoEEPCRJRaCSYkxCiFCXCF+LIMExQLkilgumgwkbdBuWDRC2EomhURCOjgagkXEgKLUKhidobM6H0+i34rxyPnuvEA5/rXPda/1l7739vJxKJxG3ls93+hEKhTILxJhgMftmsiPxdhHw4CfepeR8dCyjWwwB0kZy3iVgCoQ2ewnmXxhrBD7Cgr/ZQVA17fDRPw2UYhzK6G99IsBse6/0QNME+H8FT4EA/YiPqOgA1q4IMzBNuw6iKjkCpj+Av+AdnEEmD3bxfhzvuDk30HaEaLsEkXCO53rN+Bwg5qsvTuj/TjGYtx9nINhRmEx7AYWiFW7AXOuEcbPOUvIZ2mnrl+PkQUbNEh4QHNKUSDdsSBWEOlmxTEfvs26FL9Khe211if6Acgee+xo7xzMgBxfq9qPe3fgWBGN2lEnqtG9nExM7CV3jp3bDos2bKJB0nHFRxAxRpA/5CIXyHh5ABv6GZqd9dJ6iz2SjbxMMypGhJFtTlNzu3kK7xgDxpove8U66FK2A+s6nul5gVVMEL+Ak7lG/T+g9JcIOGar2CRUoogxMwpP/bLTJMB9bRhDbkk5bBUU0y3ES0xS04CBfN9RSHiY90vJK0BHaSzG9h2eejS3RJeVfdtrGzuGyd8CX7Yq6ExuCH63jaVMPkFOv6OibB6DKs2+VEQp+WYBoqERn2sVWWRNN0YurIfeL14U6YkpkLYCSG6e0yqdCxvKBLIm5FgAEAV0nKuwMYRUsAAAAASUVORK5CYII="}}